<template>
    <section class="slds-m-around--small">
        <h3 class="slds-section-title--divider">Options</h3>
        <manager-options
            config={config}
            is-running={isRunning}
            onstart={handleOnStart}>
        </manager-options>
    </section>


    <section class="slds-m-around--small">
        <h3 class="slds-section-title--divider">Results</h3>
        <table eval:if={done} class="slds-table slds-table--bordered slds-table--cell-buffer slds-no-row-hover">
            <thead>
                <tr class="slds-text-title--caps">
                    <th scope="col"></th>
                    <th repeat:for="bundle of bundles" scope="col">
                        {bundle.label}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr repeat:for="result of formattedResults">
                    <th>
                        <div class="slds-truncate" title={result.name}>
                            {result.name}
                        </div>
                    </th>
                    <td repeat:for="bundle of result.bundles" class={bundle.style}>
                        <div class="slds-truncate" title="{bundle.median}">
                            {bundle.median} &#177; {bundle.mad}
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>

    <section class="slds-m-around--small">
        <h3 class="slds-section-title--divider">Runners</h3>
        <manager-bundle-runner
            repeat:for="bundle of bundles"
            bundle={bundle}
            config={config}
            on-ready={handleRunnerReady}
            on-failure={handleRunnerFailure}
            on-done={handleRunnerDone}
        >
        </manager-bundle-runner>
    </section>
</template>
